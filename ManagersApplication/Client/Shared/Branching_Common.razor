@page "/Branching_Common/{RQID}"



<div class="container-fluid">
    <!-- COLOR PALETTE -->
    @* <div class="card card-default color-palette-box col-lg-4 col-12 float-right">
        <div class="card-header">
        <h3 class="card-title">
        <i class="fa fa-tag"></i>
        درخواست
        </h3>
        </div>
        <div class="card-body">
        <div class="row col-lg-12">
        <div class="col-lg-6 col-6"> نام متقاضی:</div>
        <div class="col-lg-6 col-6">علی زینلی </div>
        </div>
        <div class="row col-lg-12">
        <div class="col-lg-6 col-6">نوع انشعاب: </div>
        <div class="col-lg-6 col-6">دائم </div>
        </div>
        <div class="row col-lg-12">
        <div class="col-lg-6 col-6">موقعیت محل: </div>
        <div class="col-lg-6 col-6">ناحیه روستایی </div>
        </div>
        <div class="row col-lg-12">
        <div class="col-lg-7 col-7">چگونگی برقرسانی: </div>
        <div class="col-lg-5 col-5">شبکه موجود </div>
        </div>
        </div>
        <!-- /.card-body -->
        </div>*@
    <!-- /.card -->


    <div class="card col-lg-12 col-12 float-right">
        <div class="card-header bg-info">
            <h3 class="card-title">ردیف درخواست ها</h3>
        </div>
        <!-- /.card-header -->
        <div class="card-body p-0 scroll" style="height:137px;">
            <table class="table table-striped">
                <tr>
                    <th>ایجاد یا تغییر</th>
                    <th>نوع مشترک</th>
                    <th>نوع متقاضی</th>
                    <th>نوع انشعاب</th>
                    <th>موقعیت محل</th>
                    <th>چگونگی برق رسانی</th>
                    <th>تعداد</th>
                    <th class="td-width">نوع تقاضا</th>
                    <th class="td-width">نوع کاربری</th>
                    <th>آمپر</th>
                    <th>فاز</th>
                    <th>قدرت</th>
                    <th class="td-width">ولتاژ تحویلی</th>
                </tr>
                <tr>
                    @foreach (var item in BranchItemList)
                   {                      
                       <td>@item.Gnrt</td>
                       <td>@item.Serv_Type</td>
                       <td>@item.Rqtt_Code</td>
                       <td>@item.Brnc_Type</td>
                       <td>@item.Loct_Row_No</td>
                       <td>@item.Inst_Supr</td>
                       <td>@item.Admn_Numb</td>
                       <td>@item.Rqtp_Code</td>
                       <td>@item.Use_Type</td>
                       <td>@item.Ampr</td>
                       <td>@item.Phas</td>
                       <td>@item.Powr</td>
                       <td>@item.Volt_Type</td>
                   }                    
                </tr>
  


            </table>
        </div>
        <!-- /.card-body -->
    </div>
</div>

@code {
    [Parameter]
    public string RQID { get; set; }
    public string Requster_Name { get; set; }
    public string Gnrt { get; set; }
    public string Serv_Type { get; set; }
    public Int16 Rqtt_Code { get; set; }
    public string Brnc_Type { get; set; }
    public Int16 Loct_Row_No { get; set; }
    public string Inst_Supr { get; set; }
    public Int16 Admn_Numb { get; set; }
    public Int16 Rqtp_Code { get; set; }
    public string Use_Type { get; set; }
    public Int32 Ampr { get; set; }
    public string Phas { get; set; }
    public double Powr { get; set; }
    public string Volt_Type { get; set; }
    [Parameter]
    public List<Branching_Item> BranchItemList { get; set; }




    protected override async Task OnInitializedAsync()
    {
        BranchItemList = new List<Branching_Item>();
        //////////////////////////////////////////
        var result_list = await Http.PostAsJsonAsync("api/Branching/Get_RequestRow_Async/", RQID);
        var _json = await result_list.Content.ReadAsStringAsync();
         BranchItemList= JsonConvert.DeserializeObject<List<Branching_Item>>(_json);
    }
}
